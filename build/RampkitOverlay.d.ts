import { RampKitContext } from "./types";
export declare const injectedHardening = "\n(function(){\n  try {\n    var meta = document.querySelector('meta[name=\"viewport\"]');\n    if (!meta) { meta = document.createElement('meta'); meta.name = 'viewport'; document.head.appendChild(meta); }\n    meta.setAttribute('content','width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover');\n    var style = document.createElement('style');\n    style.textContent='html,body{overflow-x:hidden!important;} html,body,*{-webkit-user-select:none!important;user-select:none!important;-webkit-touch-callout:none!important;-ms-user-select:none!important;touch-action: pan-y;} *{-webkit-tap-highlight-color: rgba(0,0,0,0)!important;} ::selection{background: transparent!important;} ::-moz-selection{background: transparent!important;} a,img{-webkit-user-drag:none!important;user-drag:none!important;-webkit-touch-callout:none!important} input,textarea{caret-color:transparent!important;-webkit-user-select:none!important;user-select:none!important}';\n    document.head.appendChild(style);\n    var prevent=function(e){e.preventDefault&&e.preventDefault();};\n    document.addEventListener('gesturestart',prevent,{passive:false});\n    document.addEventListener('gesturechange',prevent,{passive:false});\n    document.addEventListener('gestureend',prevent,{passive:false});\n    document.addEventListener('dblclick',prevent,{passive:false});\n    document.addEventListener('wheel',function(e){ if(e.ctrlKey) e.preventDefault(); },{passive:false});\n    document.addEventListener('touchmove',function(e){ if(e.scale && e.scale !== 1) e.preventDefault(); },{passive:false});\n    document.addEventListener('selectstart',prevent,{passive:false,capture:true});\n    document.addEventListener('contextmenu',prevent,{passive:false,capture:true});\n    document.addEventListener('copy',prevent,{passive:false,capture:true});\n    document.addEventListener('cut',prevent,{passive:false,capture:true});\n    document.addEventListener('paste',prevent,{passive:false,capture:true});\n    document.addEventListener('dragstart',prevent,{passive:false,capture:true});\n    // Belt-and-suspenders: aggressively clear any attempted selection\n    var clearSel=function(){\n      try{var sel=window.getSelection&&window.getSelection(); if(sel&&sel.removeAllRanges) sel.removeAllRanges();}catch(_){} }\n    document.addEventListener('selectionchange',clearSel,{passive:true,capture:true});\n    document.onselectstart=function(){ clearSel(); return false; };\n    try{ document.documentElement.style.webkitUserSelect='none'; document.documentElement.style.userSelect='none'; }catch(_){ }\n    try{ document.body.style.webkitUserSelect='none'; document.body.style.userSelect='none'; }catch(_){ }\n    var __selTimer = setInterval(clearSel, 160);\n    window.addEventListener('pagehide',function(){ try{ clearInterval(__selTimer); }catch(_){} });\n    // Continuously enforce no-select on all elements and new nodes\n    var enforceNoSelect = function(el){\n      try{\n        el.style && (el.style.webkitUserSelect='none', el.style.userSelect='none', el.style.webkitTouchCallout='none');\n        el.setAttribute && (el.setAttribute('unselectable','on'), el.setAttribute('contenteditable','false'));\n      }catch(_){}\n    }\n    try{\n      var all=document.getElementsByTagName('*');\n      for(var i=0;i<all.length;i++){ enforceNoSelect(all[i]); }\n      var obs = new MutationObserver(function(muts){\n        for(var j=0;j<muts.length;j++){\n          var m=muts[j];\n          if(m.type==='childList'){\n            m.addedNodes && m.addedNodes.forEach && m.addedNodes.forEach(function(n){ if(n && n.nodeType===1){ enforceNoSelect(n); var q=n.getElementsByTagName? n.getElementsByTagName('*'): []; for(var k=0;k<q.length;k++){ enforceNoSelect(q[k]); }}});\n          } else if(m.type==='attributes'){\n            enforceNoSelect(m.target);\n          }\n        }\n      });\n      obs.observe(document.documentElement,{ childList:true, subtree:true, attributes:true, attributeFilter:['contenteditable','style'] });\n    }catch(_){ }\n  } catch(_) {}\n})(); true;\n";
export declare const injectedNoSelect = "\n(function(){\n  try {\n    if (window.__rkNoSelectApplied) return true;\n    window.__rkNoSelectApplied = true;\n    var style = document.getElementById('rk-no-select-style');\n    if (!style) {\n      style = document.createElement('style');\n      style.id = 'rk-no-select-style';\n      style.innerHTML = \"\n        * {\n          user-select: none !important;\n          -webkit-user-select: none !important;\n          -webkit-touch-callout: none !important;\n        }\n        ::selection {\n          background: transparent !important;\n        }\n      \";\n      document.head.appendChild(style);\n    }\n    var prevent = function(e){ if(e && e.preventDefault) e.preventDefault(); return false; };\n    document.addEventListener('contextmenu', prevent, { passive: false, capture: true });\n    document.addEventListener('selectstart', prevent, { passive: false, capture: true });\n  } catch (_) {}\n  true;\n})();\n";
export declare const injectedVarsHandler = "\n(function(){\n  try {\n    if (window.__rkVarsHandlerApplied) return true;\n    window.__rkVarsHandlerApplied = true;\n    \n    // Handler function that updates variables and notifies the page\n    window.__rkHandleVarsUpdate = function(vars) {\n      if (!vars || typeof vars !== 'object') return;\n      // Update the global variables object\n      window.__rampkitVariables = vars;\n      // Dispatch a custom event that the page's JS can listen to for re-rendering\n      try {\n        document.dispatchEvent(new CustomEvent('rampkit:vars-updated', { detail: vars }));\n      } catch(e) {}\n      // Also try calling a global handler if the page defined one\n      try {\n        if (typeof window.onRampkitVarsUpdate === 'function') {\n          window.onRampkitVarsUpdate(vars);\n        }\n      } catch(e) {}\n    };\n    \n    // Listen for message events from React Native\n    document.addEventListener('message', function(event) {\n      try {\n        var data = event.data;\n        if (data && data.type === 'rampkit:variables' && data.vars) {\n          window.__rkHandleVarsUpdate(data.vars);\n        }\n      } catch(e) {}\n    }, false);\n    \n    // Also listen on window for compatibility\n    window.addEventListener('message', function(event) {\n      try {\n        var data = event.data;\n        if (data && data.type === 'rampkit:variables' && data.vars) {\n          window.__rkHandleVarsUpdate(data.vars);\n        }\n      } catch(e) {}\n    }, false);\n  } catch (_) {}\n  true;\n})();\n";
export declare const injectedButtonAnimations = "\n(function(){\n  try {\n    if (window.__rkButtonAnimApplied) return true;\n    window.__rkButtonAnimApplied = true;\n    \n    // Add styles for button animations\n    var style = document.createElement('style');\n    style.id = 'rk-button-anim-style';\n    style.textContent = \n      '*.rk-pressed, .rk-pressed, [class*=\"rk-pressed\"] {' +\n      '  transform: scale(0.97) !important;' +\n      '  -webkit-transform: scale(0.97) !important;' +\n      '  opacity: 0.8 !important;' +\n      '  transform-origin: center center !important;' +\n      '  -webkit-transform-origin: center center !important;' +\n      '  transition: transform 80ms cubic-bezier(0.25, 0.1, 0.25, 1), opacity 80ms cubic-bezier(0.25, 0.1, 0.25, 1), -webkit-transform 80ms cubic-bezier(0.25, 0.1, 0.25, 1) !important;' +\n      '  -webkit-transition: -webkit-transform 80ms cubic-bezier(0.25, 0.1, 0.25, 1), opacity 80ms cubic-bezier(0.25, 0.1, 0.25, 1) !important;' +\n      '}' +\n      '*.rk-released, .rk-released, [class*=\"rk-released\"] {' +\n      '  transform: scale(1) !important;' +\n      '  -webkit-transform: scale(1) !important;' +\n      '  opacity: 1 !important;' +\n      '  transform-origin: center center !important;' +\n      '  -webkit-transform-origin: center center !important;' +\n      '  transition: transform 280ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 280ms cubic-bezier(0.34, 1.56, 0.64, 1), -webkit-transform 280ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;' +\n      '  -webkit-transition: -webkit-transform 280ms cubic-bezier(0.34, 1.56, 0.64, 1), opacity 280ms cubic-bezier(0.34, 1.56, 0.64, 1) !important;' +\n      '}';\n    document.head.appendChild(style);\n    \n    // Find any interactive element in the parent chain\n    function findInteractive(el) {\n      var current = el;\n      for (var i = 0; i < 15 && current; i++) {\n        if (!current.tagName) { current = current.parentElement; continue; }\n        var tag = current.tagName.toLowerCase();\n        // Match common interactive elements\n        if (tag === 'button' || tag === 'a' || tag === 'input' || tag === 'select') return current;\n        // Match elements with click handlers or data attributes\n        if (current.onclick || current.hasAttribute('onclick')) return current;\n        if (current.hasAttribute('data-rampkit-action')) return current;\n        if (current.hasAttribute('data-rampkit-navigate')) return current;\n        if (current.hasAttribute('data-rampkit-tap')) return current;\n        // Match elements with role=\"button\" or tabindex\n        if (current.getAttribute('role') === 'button') return current;\n        if (current.hasAttribute('tabindex')) return current;\n        // Match common button classes\n        if (current.className && typeof current.className === 'string') {\n          var cls = current.className.toLowerCase();\n          if (cls.indexOf('btn') !== -1 || cls.indexOf('button') !== -1 || cls.indexOf('cta') !== -1 || cls.indexOf('interactive') !== -1) return current;\n        }\n        // Match elements with cursor pointer style\n        try {\n          var computed = window.getComputedStyle(current);\n          if (computed && computed.cursor === 'pointer') return current;\n        } catch(e) {}\n        current = current.parentElement;\n      }\n      return null;\n    }\n    \n    var pressed = null;\n    var releaseTimer = null;\n    \n    function onStart(e) {\n      try {\n        var target = findInteractive(e.target);\n        if (!target) return;\n        if (releaseTimer) { clearTimeout(releaseTimer); releaseTimer = null; }\n        target.classList.remove('rk-released');\n        target.classList.add('rk-pressed');\n        pressed = target;\n      } catch(err) { console.log('[RK] touch error:', err); }\n    }\n    \n    function onEnd(e) {\n      try {\n        if (!pressed) return;\n        var t = pressed;\n        t.classList.remove('rk-pressed');\n        t.classList.add('rk-released');\n        releaseTimer = setTimeout(function() {\n          t.classList.remove('rk-released');\n          releaseTimer = null;\n        }, 300);\n        pressed = null;\n      } catch(err) {}\n    }\n    \n    function onCancel(e) {\n      try {\n        if (!pressed) return;\n        pressed.classList.remove('rk-pressed', 'rk-released');\n        pressed = null;\n        if (releaseTimer) { clearTimeout(releaseTimer); releaseTimer = null; }\n      } catch(err) {}\n    }\n    \n    // Capture phase for immediate response\n    document.addEventListener('touchstart', onStart, { passive: true, capture: true });\n    document.addEventListener('touchend', onEnd, { passive: true, capture: true });\n    document.addEventListener('touchcancel', onCancel, { passive: true, capture: true });\n    document.addEventListener('mousedown', onStart, { passive: true, capture: true });\n    document.addEventListener('mouseup', onEnd, { passive: true, capture: true });\n    \n    console.log('[RK] Button animations initialized');\n  } catch (err) { console.log('[RK] Button anim error:', err); }\n  true;\n})();\n";
export type ScreenPayload = {
    id: string;
    html: string;
    css?: string;
    js?: string;
};
export declare function showRampkitOverlay(opts: {
    onboardingId: string;
    screens: ScreenPayload[];
    variables?: Record<string, any>;
    requiredScripts?: string[];
    rampkitContext?: RampKitContext;
    onClose?: () => void;
    onOnboardingFinished?: (payload?: any) => void;
    onShowPaywall?: (payload?: any) => void;
    onScreenChange?: (screenIndex: number, screenId: string) => void;
    onOnboardingAbandoned?: (reason: string, lastScreenIndex: number, lastScreenId: string) => void;
    onNotificationPermissionRequested?: () => void;
    onNotificationPermissionResult?: (granted: boolean) => void;
}): void;
export declare function hideRampkitOverlay(): void;
export declare function closeRampkitOverlay(): void;
export declare function preloadRampkitOverlay(opts: {
    onboardingId: string;
    screens: ScreenPayload[];
    variables?: Record<string, any>;
    requiredScripts?: string[];
    rampkitContext?: RampKitContext;
}): void;
declare function Overlay(props: {
    onboardingId: string;
    screens: ScreenPayload[];
    variables?: Record<string, any>;
    requiredScripts?: string[];
    rampkitContext?: RampKitContext;
    prebuiltDocs?: string[];
    onRequestClose: () => void;
    onOnboardingFinished?: (payload?: any) => void;
    onShowPaywall?: (payload?: any) => void;
    onRegisterClose?: (handler: (() => void) | null) => void;
    onScreenChange?: (screenIndex: number, screenId: string) => void;
    onOnboardingAbandoned?: (reason: string, lastScreenIndex: number, lastScreenId: string) => void;
    onNotificationPermissionRequested?: () => void;
    onNotificationPermissionResult?: (granted: boolean) => void;
}): any;
export default Overlay;
